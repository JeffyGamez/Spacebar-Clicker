<script>
// -----------------------------
// SAVE SYSTEM
// -----------------------------

// This object will store ALL game data
function getGameState() {
    return {
        spacebarCount: spacebarCount,
        totalClicks: totalClicks,
        upgrade1Level: upgrade1Level,
        upgrade1Price: upgrade1Price,
        upgrade2Level: upgrade2Level,
        upgrade2Price: upgrade2Price,
        currentLevel: currentLevel
        // Add more variables here if you add new features later
    };
}

// Load saved data into the game
function applyGameState(state) {
    spacebarCount = state.spacebarCount ?? spacebarCount;
    totalClicks = state.totalClicks ?? totalClicks;
    upgrade1Level = state.upgrade1Level ?? upgrade1Level;
    upgrade1Price = state.upgrade1Price ?? upgrade1Price;
    upgrade2Level = state.upgrade2Level ?? upgrade2Level;
    upgrade2Price = state.upgrade2Price ?? upgrade2Price;
    currentLevel = state.currentLevel ?? currentLevel;

    updateUI();
}

// Save the game to localStorage
function saveGame() {
    const state = getGameState();
    localStorage.setItem("spacebarSave", JSON.stringify(state));
    console.log("Game saved!");
}

// Load the game from localStorage
function loadGame() {
    const saved = localStorage.getItem("spacebarSave");
    if (saved) {
        const state = JSON.parse(saved);
        applyGameState(state);
        console.log("Game loaded!");
    }
}

// Reset the game completely
function resetGame() {
    if (confirm("Are you sure? You will lose all progress.")) {
        localStorage.removeItem("spacebarSave");
        location.reload();
    }
}

// Auto-save every 5 seconds
setInterval(saveGame, 5000);

// Button listeners
document.getElementById("saveGameBtn").addEventListener("click", saveGame);
document.getElementById("resetGameBtn").addEventListener("click", resetGame);

// Load game on startup
loadGame();
</script>
